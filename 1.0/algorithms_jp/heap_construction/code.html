<pre>
# 要素数Nの配列Aでヒープを構築する
buildHeap(A):
    for i &larr; N/2 - 1 downto 0:
        downHeap(A, i)

# 要素数Nの配列Aで表されたヒープのノードiからダウンヒープを行う
# 挿入ベースの実装
downHeap(A, i): 
    largest       # 最大の値を持つノード
    cur &larr; i; # 現在地
    val &larr; A[i]   # 起点の値を一時的に退避

    while True:
        # 最大値を持つノードを探す
        if left(cur) &lt; N and right(cur) &lt; N:  
            # 左右に子を持つ場合
            if A[left(cur)] &gt; A[right(cur)]:
                largest &larr; left(cur)
            else:
                largest &larr; right(cur)
        else if left(cur) &lt; N:                  
            largest &larr; left(cur)   # 左の子のみを持つ場合
        else if right(cur) &lt; N:
            largest &larr; right(cur)  # 右の子のみを持つ場合
        else:
            largest &larr; NIL

        if largest = NIL: break         # cur が葉の場合は終了
        if A[largest] &le; val: break  # 起点の値以下の場合は終了
      
        A[cur] &larr; A[largest]
        cur &larr; largest      # 大きい方に向かって降下

    A[cur] &larr; val # 起点の値を挿入位置に戻す
</pre>
